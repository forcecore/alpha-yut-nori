*{margin:0;padding:0;box-sizing:border-box}:root{--bg: #1a1a2e;--surface: #16213e;--surface2: #0f3460;--text: #e0e0e0;--text-dim: #888;--accent: #e94560;--p0: #e74c3c;--p1: #3498db;--p2: #2ecc71;--p3: #f1c40f;--board-bg: #2c2c44;--board-line: #555;--board-node: #3a3a5c;--board-node-corner: #4a4a6c;--highlight: rgba(255, 255, 100, .5)}body{font-family:Segoe UI,system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}.hidden{display:none!important}.overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:100}.setup-panel{background:var(--surface);border-radius:12px;padding:2rem;min-width:360px;max-width:480px}.setup-panel h1{font-size:2rem;margin-bottom:1.5rem;text-align:center}.subtitle{font-size:.5em;color:var(--text-dim);font-weight:400}.setup-form{display:flex;flex-direction:column;gap:1rem}.setup-form label{display:flex;justify-content:space-between;align-items:center;gap:1rem}.setup-form select,.setup-form input{background:var(--surface2);color:var(--text);border:1px solid #444;border-radius:6px;padding:.4rem .6rem;font-size:.9rem}.checkbox-label{display:flex;align-items:center;gap:.5rem;font-size:.9rem;cursor:pointer}.player-config{display:flex;align-items:center;gap:.5rem;padding:.5rem;border-radius:8px;border-left:4px solid}.player-config input{flex:1;min-width:0}.player-config select{width:100px}.btn{background:var(--surface2);color:var(--text);border:1px solid #555;border-radius:6px;padding:.5rem 1rem;cursor:pointer;font-size:.9rem;transition:background .15s}.btn:hover{background:#1a4a7a}.btn:disabled{opacity:.4;cursor:default}.btn-primary{background:var(--accent);border-color:var(--accent);font-weight:700}.btn-primary:hover{background:#c13550}.btn-small{padding:.3rem .6rem;font-size:.8rem}.btn-move{min-width:60px;font-weight:700}.btn-move.selected{outline:2px solid #fff;outline-offset:2px}#game-container{display:flex;flex-direction:column;height:100vh}#header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;background:var(--surface);border-bottom:1px solid #333}#header h1{font-size:1.2rem}.header-actions{display:flex;gap:.5rem}#main{flex:1;display:flex;gap:0;overflow:hidden}#board-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;position:relative;min-width:0}#board-svg{width:100%;max-width:600px;max-height:calc(100vh - 160px);aspect-ratio:1}#throw-area{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000000d9;border-radius:12px;padding:1.5rem;text-align:center;z-index:10}#throw-svg{width:280px;height:100px}#throw-result{margin-top:.5rem;font-size:1.4rem;font-weight:700}#side-panel{width:260px;background:var(--surface);border-left:1px solid #333;display:flex;flex-direction:column;overflow-y:auto}#side-panel section{padding:.75rem 1rem;border-bottom:1px solid #333}#side-panel h3{font-size:.8rem;text-transform:uppercase;color:var(--text-dim);margin-bottom:.5rem;letter-spacing:.05em}.player-status-item{display:flex;align-items:center;gap:.5rem;padding:.35rem .5rem;border-radius:6px;font-size:.85rem;margin-bottom:.25rem}.player-status-item.current{background:var(--surface2);font-weight:700}.player-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}.player-name{flex:1}.player-score{color:var(--text-dim);font-size:.8rem}#moves-list{display:flex;flex-wrap:wrap;gap:.4rem}#history-log{font-size:.8rem;color:var(--text-dim);max-height:200px;overflow-y:auto}.history-entry{padding:.15rem 0;border-bottom:1px solid #222}.history-entry.capture{color:var(--accent)}#action-bar{background:var(--surface);border-top:1px solid #333;padding:.5rem 1rem;display:flex;align-items:center;gap:1rem;min-height:52px}#action-buttons{display:flex;gap:.5rem;flex-wrap:wrap}#status-message{flex:1;font-size:.9rem;color:var(--text-dim);text-align:right}.help-panel{background:var(--surface);border-radius:12px;padding:2rem;max-width:500px;max-height:80vh;overflow-y:auto}.help-panel h2{margin-bottom:1rem}.help-panel h3{margin:1rem 0 .5rem;color:var(--text-dim);font-size:.9rem}.help-panel table{width:100%;border-collapse:collapse;margin-bottom:.5rem}.help-panel td{padding:.25rem .5rem;border-bottom:1px solid #333}.help-panel kbd{background:var(--surface2);border:1px solid #555;border-radius:3px;padding:.1rem .4rem;font-size:.85rem}.help-panel ul{padding-left:1.2rem;font-size:.9rem}.help-panel li{margin-bottom:.3rem}.board-line{stroke:var(--board-line);stroke-width:2;fill:none}.board-node{fill:var(--board-node);stroke:#666;stroke-width:1.5;cursor:default}.board-node.corner{fill:var(--board-node-corner);stroke-width:2}.board-label{fill:#888;font-size:10px;text-anchor:middle;dominant-baseline:central;pointer-events:none;font-family:monospace}.piece-group{cursor:pointer;transition:transform .3s ease}.reserve-piece{cursor:pointer;opacity:.7}.piece-circle{stroke:#222;stroke-width:2}.piece-label{fill:#fff;font-size:11px;font-weight:700;text-anchor:middle;dominant-baseline:central;pointer-events:none}.stack-badge{fill:#fff;font-size:9px;font-weight:700;text-anchor:middle;dominant-baseline:central;pointer-events:none}.selection-bracket{fill:none;stroke:#fff;stroke-width:2.5;stroke-linecap:square;pointer-events:none;filter:drop-shadow(0 0 3px rgba(255,255,255,.6))}.highlight-ring{fill:none;stroke:#ffeb3b;stroke-width:3;opacity:0;animation:pulse 1s ease-in-out infinite}.dest-key-label{fill:#ffeb3b;font-size:14px;font-weight:900;text-anchor:start;dominant-baseline:central;pointer-events:none;filter:drop-shadow(0 0 3px rgba(0,0,0,.8))}.dest-highlight{fill:#ffeb3b4d;stroke:#ffeb3b;stroke-width:2;stroke-dasharray:4 2;animation:pulse 1s ease-in-out infinite}.exit-ray{stroke:#ffeb3b;stroke-width:2;stroke-linecap:round;opacity:.8;animation:pulse 1s ease-in-out infinite}.exit-rays-group{animation:exit-rotate 4s linear infinite}@keyframes exit-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes pulse{0%,to{opacity:.4}50%{opacity:1}}.yut-stick{rx:4;ry:4;transition:transform .1s}.yut-stick.flat{fill:#d4a574;stroke:#8b6914;stroke-width:1.5}.yut-stick.round{fill:#6b4226;stroke:#4a2c17;stroke-width:1.5}.stick-x-mark line{stroke:#2a1508;stroke-width:2;stroke-linecap:round}@keyframes tumble{0%{transform:translateY(0) rotate(0);opacity:0}20%{opacity:1}50%{transform:translateY(-30px) rotate(180deg)}to{transform:translateY(0) rotate(360deg)}}.stick-tumbling{animation:tumble .5s ease-out forwards}.capture-effect{pointer-events:none;animation:capture-fade 1.2s ease-out forwards}.capture-ray{stroke:#e94560;stroke-width:3;opacity:0;animation:ray-burst 1.2s ease-out forwards}.capture-glow{fill:none;stroke:#ffeb3b;stroke-width:4;opacity:0;animation:glow-expand 1.2s ease-out forwards}.capture-text{fill:#fff;font-size:36px;font-weight:900;text-anchor:middle;dominant-baseline:central;letter-spacing:.15em;opacity:0;filter:drop-shadow(0 0 8px #e94560) drop-shadow(0 0 20px #e94560);animation:text-slam 1.2s ease-out forwards}.capture-subtext{fill:#ffeb3b;font-size:18px;font-weight:700;text-anchor:middle;dominant-baseline:central;letter-spacing:.2em;opacity:0;filter:drop-shadow(0 0 6px #f1c40f);animation:subtext-appear 1.2s ease-out forwards}@keyframes ray-burst{0%{opacity:0;stroke-width:1}15%{opacity:.9;stroke-width:4}to{opacity:0;stroke-width:1;transform:scale(1.5);transform-origin:center}}@keyframes glow-expand{0%{r:10;opacity:0;stroke-width:8}20%{opacity:.8}to{r:100;opacity:0;stroke-width:1}}@keyframes text-slam{0%{opacity:0;font-size:60px}10%{opacity:1;font-size:36px}80%{opacity:1}to{opacity:0}}@keyframes subtext-appear{0%,15%{opacity:0}25%{opacity:1}80%{opacity:1}to{opacity:0}}@keyframes capture-fade{0%{opacity:1}85%{opacity:1}to{opacity:0}}.gameover-effect{pointer-events:none}.gameover-backdrop{fill:#000000b3;opacity:0;animation:fade-in .6s ease-out forwards}.gameover-ray{stroke:#f1c40f;stroke-width:2;opacity:0;animation:gameover-ray-spin 4s linear infinite}.gameover-ray:nth-child(odd){stroke:#ffeb3b;stroke-width:1.5}.gameover-title{fill:#fff;font-size:48px;font-weight:900;text-anchor:middle;dominant-baseline:central;letter-spacing:.15em;opacity:0;filter:drop-shadow(0 0 12px #f1c40f) drop-shadow(0 0 24px #f1c40f);animation:gameover-title-in .8s ease-out forwards}.gameover-rank{font-size:28px;font-weight:700;text-anchor:middle;dominant-baseline:central;opacity:0;filter:drop-shadow(0 2px 4px rgba(0,0,0,.5));animation:gameover-rank-in .5s ease-out forwards}@keyframes fade-in{to{opacity:1}}@keyframes gameover-ray-spin{0%{opacity:0;transform:rotate(0);transform-origin:300px 270px}10%{opacity:.3}50%{opacity:.15}90%{opacity:.3}to{opacity:0;transform:rotate(360deg);transform-origin:300px 270px}}@keyframes gameover-title-in{0%{opacity:0;font-size:72px}50%{opacity:1;font-size:44px}70%{font-size:50px}to{opacity:1;font-size:48px}}@keyframes gameover-rank-in{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media(max-width:768px){#main{flex-direction:column}#side-panel{width:100%;border-left:none;border-top:1px solid #333;flex-direction:row;flex-wrap:wrap;overflow-y:visible}#side-panel section{flex:1;min-width:150px;border-bottom:none;border-right:1px solid #333}#board-svg{max-height:50vh}#history-section{display:none}}
